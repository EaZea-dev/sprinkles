<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>PSI Control System</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            'primary': '#3b82f6',
            'card-bg': '#1e293b',
            'bg-dark': '#0f172a',
          },
          fontFamily: { sans: ['Inter', 'sans-serif'] }
        }
      }
    };
  </script>
</head>

<body class="bg-bg-dark text-white font-sans min-h-screen p-6">
  <div class="max-w-3xl mx-auto space-y-8">
    <h1 class="text-3xl font-bold text-primary">PSI Control System</h1>

    <button id="emergency-stop" class="w-full py-3 bg-red-600 rounded-lg font-bold hover:bg-red-700">Emergency Stop</button>

    <div>
      <label class="block mb-2">PSI Pressure: <span id="psi-val" class="text-primary">22.5 PSI</span></label>
      <input id="psi" type="range" min="20" max="25" value="22.5" step="0.1" class="w-full">
    </div>

    <div>
      <label class="block mb-2">Rotation Speed: <span id="rot-val" class="text-purple-400">60%</span></label>
      <input id="rot" type="range" min="0" max="100" value="60" class="w-full">
    </div>

    <div>
      <label class="block mb-2">Belt Speed: <span id="belt-val" class="text-green-400">50%</span></label>
      <input id="belt" type="range" min="0" max="100" value="50" class="w-full">
    </div>

    <div id="status" class="p-3 bg-green-700 rounded-lg flex items-center justify-between">
      <span class="font-semibold">OPERATIONAL</span>
      <div class="h-3 w-3 bg-green-300 rounded-full animate-pulse"></div>
    </div>
  </div>

  <div id="modal" class="fixed inset-0 bg-black/70 hidden items-center justify-center">
    <div class="bg-card-bg p-6 rounded-xl max-w-sm mx-auto">
      <h2 class="text-2xl font-bold text-red-500 mb-4">System Halted</h2>
      <p class="text-slate-300 mb-6">Emergency stop triggered. Controls disabled.</p>
      <button id="ack" class="w-full bg-primary py-2 rounded-lg font-semibold hover:bg-blue-700">Acknowledge</button>
    </div>
  </div>

  <script type="module">
  {
    let operational = true;

    const psi = document.getElementById('psi');
    const rot = document.getElementById('rot');
    const belt = document.getElementById('belt');
    const modal = document.getElementById('modal');
    const status = document.getElementById('status');

    // initialize
    document.getElementById('psi-val').textContent = `${parseFloat(psi.value).toFixed(1)} PSI`;
    document.getElementById('rot-val').textContent = `${rot.value}%`;
    document.getElementById('belt-val').textContent = `${belt.value}%`;

    psi.oninput = e => {
      document.getElementById('psi-val').textContent = `${parseFloat(e.target.value).toFixed(1)} PSI`;
    };

    rot.oninput = e => {
      document.getElementById('rot-val').textContent = `${e.target.value}%`;
    };

    belt.oninput = e => {
      document.getElementById('belt-val').textContent = `${e.target.value}%`;
    };

    document.getElementById('emergency-stop').onclick = () => {
      if (!operational) return;
      operational = false;
      [psi, rot, belt].forEach(i => i.disabled = true);
      document.getElementById('psi-val').textContent = '0.0 PSI';
      document.getElementById('rot-val').textContent = '0%';
      document.getElementById('belt-val').textContent = '0%';
      status.classList.remove('bg-green-700');
      status.classList.add('bg-red-700');
      status.querySelector('span').textContent = 'HALTED';
      const dot = status.querySelector('div');
      dot.classList.remove('bg-green-300', 'animate-pulse');
      dot.classList.add('bg-red-300');
      modal.classList.remove('hidden');
      modal.classList.add('flex');
    };

    document.getElementById('ack').onclick = () => {
      modal.classList.add('hidden');
      modal.classList.remove('flex');
    };
  }
  </script>
</body>
</html>
